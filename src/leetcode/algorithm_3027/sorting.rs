use std::cmp::Ordering;

pub struct Solution;

impl Solution {
    pub fn number_of_pairs(mut points: Vec<Vec<i32>>) -> i32 {
        points.sort_by(|a, b| {
            let x_cmp = a[0].cmp(&b[0]);
            if x_cmp != Ordering::Equal {
                return x_cmp;
            }
            b[1].cmp(&a[1])
        });
        let mut count = 0;
        for (i, a) in points.iter().enumerate() {
            'search: for (j, b) in points.iter().enumerate().skip(i + 1) {
                if a[1] < b[1] {
                    continue;
                }
                for (c, inside) in points.iter().enumerate().skip(i + 1) {
                    if c == i || c == j {
                        continue;
                    }
                    if inside[0] >= a[0]
                        && inside[0] <= b[0]
                        && inside[1] >= b[1]
                        && inside[1] <= a[1]
                    {
                        continue 'search;
                    }
                }
                count += 1;
            }
        }
        count
    }
}

#[cfg(test)]
mod tests {
    use super::*;
    use crate::vecvec;
    use test_case::test_case;

    #[test_case(vecvec![[1,1],[2,2],[3,3]] => 0; "example 1")]
    #[test_case(vecvec![[6,2],[4,4],[2,6]] => 2; "example 2")]
    #[test_case(vecvec![[3,1],[1,3],[1,1]] => 2; "example 3")]
    #[test_case(vecvec![[0,1],[1,3],[6,1]] => 2; "case 1")]
    #[test_case(vecvec![[190,113],[89,164],[120,180],[114,471],[24,438],[316,458],[38,358],[422,324],[468,141],[251,153],[170,81],[245,383],[247,60],[166,332],[183,424],[157,293],[432,240],[488,328],[243,176],[27,158],[217,167],[401,213],[476,336],[200,349],[460,26],[159,273],[304,105],[45,237],[84,61],[421,332],[21,326],[98,86],[55,413],[462,484],[294,22],[66,433],[446,161],[370,407],[474,348],[351,153],[210,131],[489,46],[237,420],[198,89],[342,191],[107,331],[106,374],[473,190],[76,205],[391,120],[26,276],[312,373],[372,124],[182,287],[335,336],[147,373],[77,146],[370,478],[333,244],[484,13],[374,49],[226,68],[486,353],[415,379],[316,193],[129,126],[194,184],[91,11],[191,383],[422,83],[329,173],[151,401],[277,55],[88,291],[202,369],[16,291],[179,439],[66,336],[186,288],[224,17],[441,480],[374,313],[489,112],[45,384],[82,321],[49,363],[322,263],[263,313],[109,244],[229,137],[448,277],[456,489],[204,210],[115,291],[391,207],[259,176],[478,125],[64,89],[436,436],[393,237],[168,248],[128,430],[481,293],[322,478],[164,140],[191,366],[254,160],[398,31],[59,219],[201,458],[306,308],[383,427],[107,481],[11,358],[439,414],[339,383],[384,353],[128,415],[68,84],[328,139],[47,251],[242,214],[1,121],[49,211],[474,79],[63,484],[268,383],[321,497],[322,28],[270,423],[369,237],[395,26],[487,48],[136,396],[81,72],[2,455],[103,42],[255,115],[58,398],[251,397],[293,394],[160,400],[406,18],[319,227],[368,464],[65,377],[44,294],[11,288],[171,234],[160,73],[480,450],[142,496],[88,14],[131,302],[464,274],[287,368],[329,180],[254,32],[144,221],[152,149],[351,487],[448,428],[28,110],[249,478],[438,20],[439,154],[289,50],[170,45],[485,331],[191,240],[401,71],[61,403],[444,381],[364,15],[458,81],[7,497],[400,209],[474,376],[185,126],[51,343],[22,299],[140,35],[9,69],[416,70],[88,358],[70,136],[260,431],[69,362],[93,306],[379,274],[135,167],[25,486],[210,32],[140,486],[485,301],[414,375],[393,338],[455,12],[303,404],[25,380],[243,239],[146,212],[328,152],[321,149],[169,156],[97,65],[67,223],[100,390],[452,16],[135,129],[7,54],[294,170],[84,436],[409,477],[160,328],[39,234],[147,366],[370,305],[273,13],[97,95],[465,382],[392,215],[298,14],[398,352],[115,231],[260,299],[290,16],[302,480],[286,168],[308,91],[486,480],[407,60],[257,328],[214,24],[137,292],[248,67],[166,301],[240,418],[22,386],[15,395],[250,108],[359,408],[390,457],[196,399],[422,160],[35,152],[473,402],[440,424],[452,39],[317,324],[333,179],[447,275],[236,281],[428,104],[283,421],[99,296],[180,171],[142,397],[381,324],[76,322],[374,155],[429,372],[277,138],[337,26],[244,2],[259,200],[114,206],[318,390],[461,439],[15,78],[281,92],[421,97],[222,477],[436,24],[234,426],[248,411],[407,174],[478,470],[372,472],[396,424],[136,48],[408,380],[145,140],[397,437],[193,98],[290,49],[403,137],[257,225],[367,414],[285,387],[282,316],[183,258],[1,269],[150,34],[289,493],[338,295],[52,29],[500,72],[160,105],[213,148],[417,314],[390,364],[110,141],[409,283],[206,261],[6,500],[102,489],[173,215],[27,193],[312,471],[191,350],[179,77],[191,176],[381,228],[395,65],[143,218],[110,376],[20,322],[330,90],[380,84],[11,276],[61,86],[456,169],[240,476],[95,35],[486,236],[163,168],[318,294],[284,281],[291,129],[376,375],[64,77],[204,112],[488,214],[440,423],[29,84],[367,492],[144,104],[86,70],[55,330],[266,424],[105,408],[212,345],[300,138],[198,493],[439,187],[69,10],[386,285],[334,222],[220,451],[482,77],[434,2],[32,380],[394,271],[158,166],[242,395],[363,10],[75,153],[338,45],[108,488],[380,60],[40,137],[407,117],[67,143],[38,488],[204,62],[54,274],[217,248],[470,56],[76,417],[38,199],[201,110],[265,412],[344,449],[10,219],[383,442],[422,19],[433,49],[229,351],[483,2],[286,368],[60,455],[303,327],[169,185],[290,351],[425,168],[246,271],[134,108],[72,348],[250,35],[59,308],[49,140],[321,427],[286,383],[101,94],[58,348],[85,349],[258,234],[469,187],[110,236],[443,338],[242,434],[470,353],[69,19],[417,307],[171,435],[347,315],[445,117],[385,321],[468,246],[289,219],[374,457],[179,22],[61,35],[462,65],[57,417],[464,139],[466,217],[58,320],[165,74],[432,261],[310,437],[379,49],[181,265],[292,67],[205,394],[51,256],[64,215],[88,78],[114,355],[89,426],[36,250],[136,457],[415,106],[276,285],[437,179],[53,276],[295,146],[336,13],[401,14],[179,291],[99,449],[266,183],[42,202],[328,399],[249,207],[414,291],[483,180],[337,200],[330,89],[116,56],[199,455],[313,31],[459,483],[393,270],[445,408],[371,265],[33,381],[83,350],[16,36],[2,354],[26,181],[205,284],[264,164],[91,424],[156,94],[107,45],[360,260],[378,102],[112,348],[474,8],[167,277],[277,2],[56,285],[186,166],[452,371],[203,50],[276,398],[175,399],[58,343],[379,209],[453,461],[35,467],[216,184],[76,309],[256,331],[302,235],[238,203],[122,333],[253,456],[345,392],[13,21],[266,484],[212,229],[270,211],[265,201],[14,316],[86,130],[190,310],[322,355],[462,455],[434,95],[146,71],[9,171],[301,277],[98,382],[131,152],[135,261],[29,450],[133,206],[315,29],[19,197],[383,331],[315,55],[402,105],[92,44],[176,362],[56,232],[156,364],[90,193],[13,257],[464,430],[89,51],[450,472],[175,443],[167,347],[245,366],[456,235],[250,371],[367,406],[360,118],[47,53],[352,196],[405,14],[73,173],[4,130],[159,23],[413,379],[39,103],[22,350],[429,146],[278,98],[428,110],[265,446],[500,121],[403,210],[320,415],[239,211],[366,236],[315,233],[460,28],[178,368],[173,81],[242,45],[238,312],[448,460],[39,455],[385,176],[160,206],[131,326],[215,201],[106,253],[415,374],[415,430],[174,379],[21,269],[192,477],[455,293],[422,192],[216,148],[51,78],[4,454],[387,463],[379,393],[374,251],[50,406],[274,305],[473,294],[179,126],[186,271],[247,479],[384,338],[42,121],[298,381],[21,210],[383,103],[9,49],[23,62],[491,88],[235,108],[147,254],[385,111],[448,260],[446,1],[65,385],[106,353],[248,129],[360,141],[419,455],[397,241],[226,413],[465,267],[189,420],[460,355],[391,190],[120,131],[215,174],[464,492],[407,492],[373,89],[241,447],[6,434],[21,289],[432,174],[237,106],[486,404],[160,168],[79,488],[293,287],[485,184],[247,483],[459,38],[336,480],[7,183],[232,478],[477,350],[19,216],[492,407],[368,434],[244,326],[145,239],[121,30],[327,311],[500,26],[359,45],[139,321],[421,39],[225,314],[163,10],[374,378],[131,284],[9,425],[272,406],[149,47],[307,498],[407,321],[380,450],[376,475],[196,233],[434,163],[47,264],[337,330],[170,205],[259,204],[290,306],[403,27],[53,120],[27,291],[195,312],[175,301],[329,450],[264,401],[306,18],[322,324],[424,375],[170,96],[355,151],[152,177],[103,138],[290,70],[364,16],[285,238],[155,33],[495,273],[237,194],[238,380],[496,74],[481,431],[59,296],[117,312],[363,422],[226,116],[221,449],[324,211],[188,11],[142,366],[243,277],[31,63],[310,408],[325,281],[448,114],[120,18],[105,294],[369,364],[48,245],[229,202],[101,253],[316,135],[34,443],[228,16],[461,255],[15,500],[192,145],[338,336],[369,146],[298,379],[237,370],[94,480],[495,372],[119,208],[149,409],[80,446],[122,462],[401,431],[392,288],[309,286],[118,153],[290,183],[368,447],[449,92],[225,84],[475,452],[426,174],[109,118],[496,266],[416,364],[336,454],[470,13],[233,9],[157,120],[246,384],[123,203],[142,481],[298,53],[478,389],[260,313],[202,99],[371,331],[305,309],[148,173],[200,419],[408,470],[480,72],[284,359],[344,57],[240,467],[114,326],[38,486],[48,444],[335,355],[210,250],[239,216],[141,334],[163,86],[204,86],[121,404],[168,304],[340,472],[213,121],[277,227],[361,78],[193,480],[118,286],[305,6],[88,470],[471,116],[96,185],[239,232],[404,143],[140,151],[154,411],[373,280],[346,182],[337,296],[194,14],[303,82],[405,295],[68,19],[300,113],[283,204],[327,6],[186,183],[326,54],[270,87],[51,112],[369,97],[303,287],[55,186],[377,134],[79,80],[83,307],[415,150],[157,96],[210,440],[139,466],[240,367],[360,30],[375,348],[387,115],[113,450],[458,167],[435,18],[179,308],[245,51],[408,495],[456,471],[43,336],[7,426],[70,236],[340,343],[214,266],[375,285],[48,47],[91,40],[475,320],[270,194],[458,277],[271,354],[169,452],[234,482],[442,331],[87,325],[5,156],[179,47],[305,110],[450,186],[168,408],[369,262],[70,10],[334,37],[119,485],[497,16],[219,439],[372,384],[188,145],[181,147],[365,136],[368,279],[422,174],[448,88],[216,313],[440,474],[208,229],[120,231],[144,219],[155,120],[162,362],[140,209],[220,350],[103,201],[76,61],[96,178],[284,375],[325,41],[278,293],[494,352],[261,436],[43,209],[456,201],[430,461],[43,470],[296,442],[301,137],[102,295],[105,330],[419,7],[292,400],[102,500],[126,72],[140,257],[417,468],[209,230],[467,367],[238,488],[237,423],[444,175],[12,455],[10,5],[198,488],[153,40],[89,286],[478,117],[165,436],[76,98],[496,79],[308,221],[251,176],[472,306],[191,354],[266,298],[313,362],[42,190],[194,10],[89,394],[321,75],[157,454],[228,460],[174,402],[67,331],[297,183],[127,182],[173,31],[376,177],[397,290],[301,430],[364,364],[332,324],[132,498],[143,442],[74,461],[115,145],[126,273],[452,27],[249,393],[403,225],[297,243],[295,473],[309,480],[375,210],[252,475],[9,453],[413,130],[493,172],[175,243],[321,477],[48,438],[200,177],[53,279],[130,359],[92,258],[277,99],[285,22],[428,316],[66,18],[414,211],[469,499],[160,355],[171,34],[500,113],[136,473],[368,397],[344,430],[176,252],[65,327],[459,211],[378,474],[273,484],[65,107],[429,299],[83,196],[322,193],[219,385],[285,48],[59,18],[437,426],[481,258],[273,406],[14,312],[95,403],[258,368],[116,188],[188,120],[254,84],[19,69],[490,14],[213,472],[23,110],[458,347],[18,193],[208,334],[431,489],[226,241],[261,314],[496,376],[299,21],[448,267],[333,107],[479,5],[158,299],[153,20],[255,146],[459,338],[285,102],[300,478],[52,145],[70,148],[156,403],[351,57],[470,337],[123,353],[464,395],[332,280],[118,309],[474,1],[428,490],[120,3],[257,278],[407,209],[390,11],[24,305]] => 4615; "case 2")]
    fn test_solution(points: Vec<Vec<i32>>) -> i32 {
        Solution::number_of_pairs(points)
    }
}
